# Amaidesu 配置文件

[general]
# Amaidesu 在 MaiCore 中注册的平台标识符
platform_id = "amaidesu_default"

[maicore]
# MaiCore WebSocket 服务器地址
host = "127.0.0.1"
# MaiCore WebSocket 服务器端口
port = 8000
# token = "your_maicore_token_if_needed" # 如果 MaiCore 需要认证，取消注释并设置

[spark_rtasr]
# 讯飞 RTASR 实时识别凭据
# app_id = ""
# access_key_id = ""
# access_key_secret = ""
# 可选：自定义 websocket URL（默认官方地址）
# ws_url = "wss://office-api-ast-dx.iflyaisol.com/ast/communicate/v1"
app_id = ""
access_key_id = ""
access_key_secret = ""


[http_server]
# 是否启用本地 HTTP 回调服务器
enable = true
# 监听的主机地址
host = "127.0.0.1"
# 监听的端口
port = 8080
# MaiCore 或其他服务访问的回调路径
callback_path = "/maicore_callback"

# 上下文管理器配置
[context_manager]
enabled = true

# 上下文格式化配置
[context_manager.formatting]
separator = "\n"           # 上下文项之间的分隔符
add_provider_title = false # 是否在上下文前添加提供者名称
title_separator = ": "     # 如果添加提供者名称，使用的分隔符

# 上下文长度限制配置
[context_manager.limits]
default_max_length = 1000 # 默认上下文最大长度
default_priority = 100    # 默认优先级值

# 管道配置
[pipelines]
# 示例：启用并配置 throttle 管道
# [pipelines.throttle]
# priority = 100        # 数字越小优先级越高，此行存在即表示启用
# global_rate_limit = 1 # 可选：覆盖 throttle/config.toml 中的 global_rate_limit
# user_rate_limit = 5    # 可选：覆盖 throttle/config.toml 中的 user_rate_limit

# 示例：启用 message_logger 管道，使用其默认配置
# [pipelines.message_logger]
# priority = 200

# 示例：启用 similar_message_filter 管道，并覆盖其时间窗口
# [pipelines.similar_message_filter]
# priority = 300
# time_window = 10.0 # 覆盖 similar_message_filter/config.toml 中的 time_window

# 示例：启用并配置 command_processor 管道 (入站)
[pipelines.command_processor]
# 这是一个入站管道，用于处理和执行来自 MaiCore 消息中的命令
# 例如，执行 VTubeStudio 热键，然后从文本中移除命令标记
priority = 50
# direction = "inbound" # 此管道的 direction 已在其自己的 config 中设置，此处无需重复
# 可以在此覆盖 command_map
# command_map = { vts_trigger_hotkey = { service = "vts_control", method = "trigger_hotkey" } }

# 插件全局配置
[plugins]
# === 新格式：启用列表 ===
# 取消注释来启用插件，注释掉来禁用
enabled = [
    # 基础功能（建议启用）
    "console_input",
    "keyword_action",
    "llm_text_processor",  # LLM文本处理器

    # 游戏互动
    # "mainosaba",        # 魔裁游戏
    # "arknights",        # 明日方舟
    # "minecraft",        # 我的世界

    # 输入功能（语音和文本输入）
    # "stt",              # 语音识别
    # "funasr_stt",       # FunASR语音识别
    # "bili_danmaku",     # B站弹幕输入
    # "bili_danmaku_official",       # B站官方弹幕（不要和bili_danmaku同时启用）
    # "bili_danmaku_official_maicraft",  # B站弹幕-MaiCraft版（不要和bili_danmaku_selenium同时启用）
    # "bili_danmaku_selenium",        # B站弹幕-Selenium版
    # "mock_danmaku",     # 模拟弹幕输入
    # "read_pingmu",      # 读屏木输入
    # "message_replayer", # 消息重放器

    # 输出功能（语音和视觉输出）
    # "tts",              # 语音合成
    # "gptsovits_tts",    # GPT-SoVITS TTS
    # "omni_tts",         # Omni TTS
    # "subtitle",         # 字幕生成
    # "sticker",          # 贴纸生成
    # "emotion_judge",    # 情感判断

    # 外部控制和集成
    # "vtube_studio",     # VTubeStudio控制
    # "warudo",           # Warudo控制
    # "obs_control",      # OBS Studio控制
    # "dg_lab_service",   # DG-Lab服务
    # "dg-lab-do",        # DG-Lab DO

    # 监控和流媒体
    # "screen_monitor",   # 屏幕监控
    # "remote_stream",    # 远程串流

    # 游戏相关
    # "maicraft",         # MaiCraft游戏

    # 系统工具
    # "command_processor",  # 命令处理器（通常作为管道使用）
]

# === 旧格式（向后兼容，可选） ===
# 以下配置仍然有效，但会被enabled列表覆盖
# enable_console_input = true
# enable_stt = false
# ...（保留原有配置作为注释示例）
