# Amaidesu æ–‡æ¡£

ä¸º AI ç¼–ç ä»£ç†å’Œåä½œè€…æä¾›çš„é¡¹ç›®æ–‡æ¡£ã€‚

## ğŸ“– å¿«é€Ÿå¯¼èˆª

### æ–°æ‰‹å…¥é—¨
- [å¿«é€Ÿå¼€å§‹](getting-started.md) - ç¯å¢ƒè®¾ç½®å’ŒåŸºæœ¬ä½¿ç”¨
- [å¼€å‘è§„èŒƒ](development-guide.md) - ä»£ç é£æ ¼å’Œå¼€å‘çº¦å®š

### æ¶æ„ç†è§£
- [3åŸŸæ¶æ„æ€»è§ˆ](architecture/overview.md) - é¡¹ç›®æ ¸å¿ƒæ¶æ„
- [æ•°æ®æµè§„åˆ™](architecture/data-flow.md) - 3åŸŸæ•°æ®æµå’Œäº‹ä»¶çº¦æŸ
- [äº‹ä»¶ç³»ç»Ÿ](architecture/event-system.md) - EventBus ä½¿ç”¨æŒ‡å—

### å¼€å‘æŒ‡å—
- [Provider å¼€å‘](development/provider-guide.md) - Input/Decision/Output Provider
- [ç®¡é“å¼€å‘](development/pipeline-guide.md) - TextPipeline å¼€å‘
- [æç¤ºè¯ç®¡ç†](development/prompt-management.md) - PromptManager ä½¿ç”¨
- [æµ‹è¯•è§„èŒƒ](development/testing-guide.md) - æµ‹è¯•ç¼–å†™è§„èŒƒ

### æ ¸å¿ƒæ¨¡å—
- [äº‹ä»¶ç³»ç»Ÿ](modules/events.md) - EventBus äº‹ä»¶æ€»çº¿
- [é…ç½®ç®¡ç†](modules/config.md) - é…ç½®åŠ è½½å’ŒéªŒè¯
- [å¯¹è¯ä¸Šä¸‹æ–‡](modules/context.md) - ä¼šè¯ç®¡ç†å’Œå†å²
- [LLM å®¢æˆ·ç«¯](modules/llm.md) - å¤§è¯­è¨€æ¨¡å‹è°ƒç”¨
- [æ—¥å¿—ç³»ç»Ÿ](modules/logging.md) - ç»Ÿä¸€æ—¥å¿—é…ç½®
- [æç¤ºè¯ç®¡ç†](modules/prompts.md) - PromptManager ä½¿ç”¨
- [éŸ³é¢‘æµä¼ è¾“](modules/streaming.md) - éŸ³é¢‘æ•°æ®ä¼ è¾“
- [TTS æœåŠ¡](modules/tts.md) - è¯­éŸ³åˆæˆç®¡ç†
- [æ ¸å¿ƒç±»å‹](modules/types.md) - å…±äº«ç±»å‹å®šä¹‰
- [Provider æ³¨å†Œè¡¨](modules/registry.md) - Provider æ³¨å†Œ

### API å‚è€ƒ
- [InputProvider API](api/input_provider.md)
- [OutputProvider API](api/output_provider.md)
- [DecisionProvider API](api/decision_provider.md)
- [EventBus API](api/event_bus.md)
- [MaiBot Action é›†æˆ](api/maibot_action_integration.md)

### å·¥å…·å’ŒéªŒè¯
- [æ¶æ„éªŒè¯å™¨](architecture/architectural-validator.md) - è¿è¡Œæ—¶æ¶æ„çº¦æŸéªŒè¯
- [äººå·¥æµ‹è¯•éœ€æ±‚](development/manual-testing-requirements.md) - éœ€è¦çœŸå®ç¯å¢ƒæµ‹è¯•çš„ç»„ä»¶

## ğŸ¯ æŒ‰éœ€æ±‚æŸ¥æ‰¾

### æˆ‘æƒ³...

**äº†è§£é¡¹ç›®ç»“æ„** â†’ [æ¶æ„æ€»è§ˆ](architecture/overview.md)

**å¼€å‘æ–°åŠŸèƒ½** â†’ [å¼€å‘è§„èŒƒ](development-guide.md) â†’ [Providerå¼€å‘](development/provider-guide.md)

**ä¿®å¤ Bug** â†’ [æµ‹è¯•è§„èŒƒ](development/testing-guide.md)

**ç†è§£æ•°æ®æµ** â†’ [æ•°æ®æµè§„åˆ™](architecture/data-flow.md)

**æ·»åŠ æ–° Provider** â†’ [Provider å¼€å‘æŒ‡å—](development/provider-guide.md)

**é…ç½® LLM æç¤ºè¯** â†’ [æç¤ºè¯ç®¡ç†](development/prompt-management.md)

**è¿è¡Œæµ‹è¯•** â†’ [æµ‹è¯•è§„èŒƒ](development/testing-guide.md)

**ç†è§£äº‹ä»¶ç³»ç»Ÿ** â†’ [äº‹ä»¶ç³»ç»Ÿ](architecture/event-system.md)

## ğŸ“ æ–‡æ¡£ç»“æ„

```
docs/
â”œâ”€â”€ README.md                          # æœ¬æ–‡æ¡£
â”œâ”€â”€ getting-started.md                 # å¿«é€Ÿå¼€å§‹
â”œâ”€â”€ development-guide.md               # å¼€å‘è§„èŒƒ
â”œâ”€â”€ architecture/                      # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ overview.md                    # 3åŸŸæ¶æ„æ€»è§ˆ
â”‚   â”œâ”€â”€ data-flow.md                   # æ•°æ®æµè§„åˆ™
â”‚   â”œâ”€â”€ event-system.md                # äº‹ä»¶ç³»ç»Ÿ
â”‚   â””â”€â”€ architectural-validator.md     # æ¶æ„éªŒè¯å™¨
â”œâ”€â”€ development/                       # å¼€å‘æŒ‡å—
â”‚   â”œâ”€â”€ provider-guide.md              # Provider å¼€å‘
â”‚   â”œâ”€â”€ pipeline-guide.md              # Pipeline å¼€å‘
â”‚   â”œâ”€â”€ prompt-management.md           # æç¤ºè¯ç®¡ç†
â”‚   â”œâ”€â”€ testing-guide.md               # æµ‹è¯•è§„èŒƒ
â”‚   â””â”€â”€ manual-testing-requirements.md # äººå·¥æµ‹è¯•éœ€æ±‚
â”œâ”€â”€ modules/                           # æ ¸å¿ƒæ¨¡å—æ–‡æ¡£
â”‚   â”œâ”€â”€ events.md                      # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”œâ”€â”€ config.md                      # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ context.md                     # å¯¹è¯ä¸Šä¸‹æ–‡
â”‚   â”œâ”€â”€ llm.md                        # LLM å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ logging.md                    # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ prompts.md                     # æç¤ºè¯ç®¡ç†
â”‚   â”œâ”€â”€ streaming.md                   # éŸ³é¢‘æµä¼ è¾“
â”‚   â”œâ”€â”€ tts.md                        # TTS æœåŠ¡
â”‚   â”œâ”€â”€ types.md                      # æ ¸å¿ƒç±»å‹
â”‚   â””â”€â”€ registry.md                   # Provider æ³¨å†Œè¡¨
â”œâ”€â”€ api/                               # API å‚è€ƒ
â”‚   â”œâ”€â”€ input_provider.md
â”‚   â”œâ”€â”€ output_provider.md
â”‚   â”œâ”€â”€ decision_provider.md
â”‚   â”œâ”€â”€ event_bus.md
â”‚   â””â”€â”€ maibot_action_integration.md
â””â”€â”€ configuration/                      # é…ç½®ç¤ºä¾‹
    â””â”€â”€ examples.md
```


## ğŸš€ å¿«é€Ÿå¼€å§‹

1. **ç¯å¢ƒå‡†å¤‡**
   ```bash
   # å®‰è£… uv åŒ…ç®¡ç†å™¨
   powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"

   # åŒæ­¥ä¾èµ–
   uv sync
   ```

2. **è¿è¡Œé¡¹ç›®**
   ```bash
   # æ­£å¸¸è¿è¡Œ
   uv run python main.py

   # è°ƒè¯•æ¨¡å¼
   uv run python main.py --debug
   ```

3. **è¿è¡Œæµ‹è¯•**
   ```bash
   uv run pytest tests/
   ```

è¯¦è§ï¼š[å¿«é€Ÿå¼€å§‹](getting-started.md)

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### å½“å‰æ¶æ„

é¡¹ç›®é‡‡ç”¨ **3åŸŸæ¶æ„**ï¼ˆInput â†’ Decision â†’ Outputï¼‰ï¼š

```
src/
â”œâ”€â”€ modules/               # æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼ˆè·¨åŸŸå…±äº«ï¼‰
â”‚   â”œâ”€â”€ types/            # å…±äº«ç±»å‹å®šä¹‰ï¼ˆintent.py, base/ï¼‰
â”‚   â”œâ”€â”€ events/           # äº‹ä»¶ç³»ç»Ÿï¼ˆEventBus, CoreEventsï¼‰
â”‚   â”œâ”€â”€ logging/          # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ context/          # ä¸Šä¸‹æ–‡æœåŠ¡
â”‚   â”œâ”€â”€ llm/              # LLM å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ tts/              # TTS å¼•æ“
â”‚   â”œâ”€â”€ streaming/        # éŸ³é¢‘æµé€šé“
â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ prompts/          # æç¤ºè¯ç®¡ç†
â”‚
â”œâ”€â”€ domains/
â”‚   â”œâ”€â”€ input/            # Input Domain
â”‚   â”‚   â”œâ”€â”€ providers/    # 8 ä¸ªè¾“å…¥ Provider
â”‚   â”‚   â”‚   â”œâ”€â”€ bili_danmaku/
â”‚   â”‚   â”‚   â”œâ”€â”€ bili_danmaku_official/
â”‚   â”‚   â”‚   â”œâ”€â”€ bili_danmaku_official_maicraft/
â”‚   â”‚   â”‚   â”œâ”€â”€ console_input/
â”‚   â”‚   â”‚   â”œâ”€â”€ mainosaba/
â”‚   â”‚   â”‚   â”œâ”€â”€ mock_danmaku/
â”‚   â”‚   â”‚   â”œâ”€â”€ read_pingmu/
â”‚   â”‚   â”‚   â”œâ”€â”€ remote_stream/
â”‚   â”‚   â”‚   â””â”€â”€ stt/
â”‚   â”‚   â””â”€â”€ pipelines/    # æ–‡æœ¬é¢„å¤„ç†ç®¡é“
â”‚   â”‚
â”‚   â”œâ”€â”€ decision/         # Decision Domain
â”‚   â”‚   â””â”€â”€ providers/    # 3 ä¸ªå†³ç­– Provider
â”‚   â”‚       â”œâ”€â”€ llm/
â”‚   â”‚       â”œâ”€â”€ maicore/
â”‚   â”‚       â””â”€â”€ maicraft/
â”‚   â”‚
â”‚   â””â”€â”€ output/           # Output Domain
â”‚       â””â”€â”€ providers/    # 10 ä¸ªè¾“å‡º Provider
â”‚           â”œâ”€â”€ audio/           # TTS éŸ³é¢‘è¾“å‡º
â”‚           â”œâ”€â”€ avatar/          # è™šæ‹Ÿå½¢è±¡æ§åˆ¶
â”‚           â”‚   â”œâ”€â”€ vts/
â”‚           â”‚   â”œâ”€â”€ warudo/
â”‚           â”‚   â””â”€â”€ vrchat/
â”‚           â”œâ”€â”€ subtitle/        # å­—å¹•è¾“å‡º
â”‚           â”œâ”€â”€ sticker/         # è´´å›¾è¾“å‡º
â”‚           â”œâ”€â”€ obs_control/     # OBS æ§åˆ¶
â”‚           â”œâ”€â”€ remote_stream/   # è¿œç¨‹æµè¾“å‡º
â”‚           â”œâ”€â”€ warudo/          # Warudo åè®®
â”‚           â””â”€â”€ mock/            # æ¨¡æ‹Ÿè¾“å‡º
â”‚
â””â”€â”€ amaidesu_core.py      # æ ¸å¿ƒåè°ƒå™¨ï¼ˆç»„åˆæ ¹ï¼‰
```

**æ•°æ®æµ**ï¼šInput Domain â†’ Decision Domain â†’ Output Domainï¼ˆå•å‘ï¼‰

è¯¦ç»†è®¾è®¡ï¼š[æ¶æ„æ€»è§ˆ](architecture/overview.md)

### å·²åºŸå¼ƒçš„åŠŸèƒ½

- âŒ **æ’ä»¶ç³»ç»Ÿ**ï¼šå·²ç§»é™¤ï¼Œä¸å†æœ‰ `Plugin` åŸºç±»
- âŒ **æœåŠ¡æ³¨å†Œæœºåˆ¶**ï¼šæ”¹ç”¨ EventBus é€šä¿¡
- âŒ **7å±‚/5å±‚æ¶æ„**ï¼šç»Ÿä¸€ä¸º3åŸŸæ¶æ„

### æ ¸å¿ƒçº¦å®š

- ä½¿ç”¨ **Pydantic BaseModel** ä½œä¸ºæ•°æ®ç±»å‹
- ä½¿ç”¨ **EventBus** è¿›è¡Œè·¨åŸŸé€šä¿¡ï¼ˆå‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼‰
- **ä¸¥æ ¼éµå®ˆå•å‘æ•°æ®æµ**ï¼šInput â†’ Decision â†’ Output
- æ‰€æœ‰ Provider é€šè¿‡ **é…ç½®é©±åŠ¨** å¯ç”¨

## ğŸ“š æ ¸å¿ƒè§„èŒƒé€ŸæŸ¥

### å‘½åçº¦å®š

- ç±»åï¼šPascalCaseï¼ˆå¦‚ `MyProvider`ï¼‰
- å‡½æ•°/å˜é‡ï¼šsnake_caseï¼ˆå¦‚ `my_function`ï¼‰
- Provider ç±»ï¼šä»¥ `Provider` ç»“å°¾
- ç®¡é“ç±»ï¼šä»¥ `Pipeline` ç»“å°¾

### æ•°æ®ç±»å‹ä¼˜å…ˆçº§

1. **Pydantic BaseModel** - æ‰€æœ‰æ•°æ®æ¨¡å‹ã€é…ç½® Schema
2. **dataclass** - ä»…ç”¨äºç®€å•å†…éƒ¨ç»Ÿè®¡ç±»
3. **Protocol** - å®šä¹‰æ¥å£åè®®

### å¯¼å…¥é¡ºåº

1. æ ‡å‡†åº“
2. ç¬¬ä¸‰æ–¹åº“
3. æœ¬åœ°é¡¹ç›®å¯¼å…¥ï¼ˆä» `src` å¼€å§‹ï¼‰

è¯¦è§ï¼š[å¼€å‘è§„èŒƒ](development-guide.md)

## ğŸ”— ç›¸å…³é“¾æ¥

- **AGENTS.md** - ç»™ AI ä»£ç†çš„å®Œæ•´æŒ‡å—ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰
- **CLAUDE.md** - Claude Code ä¸“å±è§„åˆ™

---

*æœ€åæ›´æ–°ï¼š2026-02-09*
